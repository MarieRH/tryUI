<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Campaign Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="logo">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
            </div>
            <h1>Email Campaign Tracker</h1>
            <p class="subtitle">Track your email campaigns efficiently</p>
            
            <div class="form-group">
                <label>Username</label>
                <input type="text" id="username" placeholder="Enter username">
            </div>
            
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="password" placeholder="Enter password">
            </div>
            
            <button onclick="login()" class="btn-primary">Login</button>
            
            <p class="demo-info">Demo: username: <strong>demo</strong>, password: <strong>demo123</strong></p>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboardScreen" class="screen">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="header-left">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    <h1>Email Tracker</h1>
                </div>
                <button onclick="logout()" class="btn-secondary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    Logout
                </button>
            </div>
        </div>

        <div class="container">
            <!-- Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-content">
                        <p class="stat-label">Total Emails</p>
                        <p class="stat-value" id="totalEmails">0</p>
                    </div>
                    <div class="stat-icon blue">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline>
                            <path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>
                        </svg>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-content">
                        <p class="stat-label">Test After Messages</p>
                        <p class="stat-value" id="testAfterCount">0</p>
                    </div>
                    <div class="stat-icon green">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
                            <polyline points="16 7 22 7 22 13"></polyline>
                        </svg>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-content">
                        <p class="stat-label">Unique Senders</p>
                        <p class="stat-value" id="uniqueSenders">0</p>
                    </div>
                    <div class="stat-icon purple">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Mailboxes Section -->
            <div class="card">
                <h2>Test Mailboxes</h2>
                
                <div class="mailbox-form">
                    <input type="email" id="mailboxEmail" placeholder="Email address">
                    <input type="password" id="mailboxPassword" placeholder="Password">
                    <input type="text" id="mailboxHost" value="mail.bigpond.com" placeholder="Host">
                    <input type="text" id="mailboxPort" value="995" placeholder="Port">
                </div>
                
                <button onclick="addMailbox()" class="btn-primary full-width">Add Mailbox</button>

                <div id="mailboxList" class="mailbox-list"></div>
            </div>

            <!-- Filters Section -->
            <div class="card">
                <h2>Filters</h2>
                
                <div class="filter-grid">
                    <div class="search-box">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" id="searchTerm" placeholder="Search by sender or subject..." oninput="filterEmails()">
                    </div>
                    
                    <select id="filterType" onchange="filterEmails()">
                        <option value="all">All Emails</option>
                        <option value="testAfter">Test After Only</option>
                    </select>
                </div>
            </div>

            <!-- Email List -->
            <div class="card">
                <h2>Emails (<span id="emailCount">0</span>)</h2>
                
                <div id="emailList" class="email-list">
                    <p class="empty-state">No emails yet. Add a mailbox and fetch emails.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>
    
    <!-- App JavaScript -->
    <script src="app.js"></script>
</body>
</html>
